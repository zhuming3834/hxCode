webpackJsonp([10],{B5iI:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=i("mvHQ"),c=i.n(o),a={name:"shopcar",data:function(){return{isShow:!1,isAll:!1,allPrice:0,allNum:0,cIds:"",goodsList:[],selectGoods:[]}},activated:function(){this.getCartData()},watch:{goodsList:{handler:function(t,s){var i=this.goodsList.length;this.allPrice=0,this.allNum=0;var o=0;this.cIds="",this.selectGoods=[];for(var c=0;c<i;c++)1==this.goodsList[c].ischeck&&(this.allNum=this.allNum+1,this.allPrice=this.allPrice+this.goodsList[c].price,this.cIds=this.cIds+this.goodsList[c].tid+",",this.selectGoods.push(this.goodsList[c]),o++);this.isAll=o==i},deep:!0}},methods:{getCartData:function(){var t=this;this.$axios.get("basic/commodity/findCommodityListByTrolley.do",{params:{}}).then(function(s){if(0==s.data.ret_code){for(var i=s.data.ret_data.length,o=0;o<i;o++)s.data.ret_data[o].ischeck=!1;t.goodsList=s.data.ret_data}else alert(s.data.ret_msg)}).catch(function(t){alert("网路链接失败")})},checkBoxClick:function(t){for(var s=this.goodsList.length,i=0;i<s;i++)this.goodsList[i].tid==t&&(this.goodsList[i].ischeck=1!=this.goodsList[i].ischeck)},allCheckClick:function(){var t=this.goodsList.length;if(1==this.isAll){this.isAll=!1;for(var s=0;s<t;s++)this.goodsList[s].ischeck=!1}else{this.isAll=!0;for(s=0;s<t;s++)this.goodsList[s].ischeck=!0}},itemClick:function(t){this.$router.push({path:"/goodsDetail",query:{cid:t}})},confirmClick:function(){if(0!=this.selectGoods.length){var t=c()(this.selectGoods);localStorage.setItem("selectGoods",t);var s=this;setTimeout(function(){s.$router.push("/confirmOrder")},200)}else alert("请先选择商品")},editClick:function(){this.isShow=!0},deleteBtnClick:function(){var t=this;""!=t.cIds?(t.cIds=t.cIds.substring(0,t.cIds.length-1),this.$axios.get("basic/commodity/removeCommodityListToTrolley.do",{params:{tIds:t.cIds}}).then(function(s){console.log(s),0==s.data.ret_code?(t.isShow=!1,t.getCartData()):alert(s.data.ret_msg)}).catch(function(t){alert("网路链接失败")})):alert("请先选择您要删除的商品")},cancleBtnClick:function(){this.isShow=!1}},components:{NavFooter:i("ZgId").a}},e={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"shopcar"},[i("div",{staticClass:"content"},[1==t.isShow?i("div",{staticClass:"topArea"},[i("div",{staticClass:"delete",on:{click:t.deleteBtnClick}},[t._v("删除")]),t._v(" "),i("div",{staticClass:"cancle",on:{click:t.cancleBtnClick}},[t._v("取消")])]):t._e(),t._v(" "),t._l(t.goodsList,function(s){return i("div",{key:s.cid,staticClass:"goodsItem"},[i("div",{class:[s.ischeck?"goodsLeft":"goodsLeft2"],on:{click:function(i){t.checkBoxClick(s.tid)}}}),t._v(" "),i("div",{staticClass:"goodsMiddel",on:{click:function(i){t.itemClick(s.cid)}}},[i("img",{attrs:{src:s.imgUrl1}})]),t._v(" "),i("div",{staticClass:"goodsRight"},[i("div",{staticClass:"goodsRight_title"},[t._v(t._s(s.cName))]),t._v(" "),i("div",{staticClass:"goodsRight_bottom"},[i("div",{staticClass:"goodsPrice"},[i("span",[t._v("￥")]),t._v(t._s(s.price))]),t._v(" "),i("div",{staticClass:"goodsNum"},[t._v("x"+t._s(s.buyNum))])])])])})],2),t._v(" "),i("div",{staticClass:"car_bottom"},[i("div",{class:[t.isAll?"car_bottom_left":"car_bottom_left2"],on:{click:t.allCheckClick}},[t._v("\n      全选\n      "),i("span",{staticClass:"allNum"},[t._v("共"),i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.allNum))]),t._v("件商品")]),t._v(" "),i("span",{staticClass:"allPrice"},[t._v("合计"),i("span",{staticStyle:{color:"red"}},[t._v(t._s(t.allPrice))]),t._v("元")])]),t._v(" "),i("div",{staticClass:"car_bottom_right",on:{click:t.confirmClick}},[t._v("结算")]),t._v(" "),i("div",{staticClass:"car_bottom_edit",on:{click:t.editClick}},[t._v("编辑")])]),t._v(" "),i("nav-footer")],1)},staticRenderFns:[]};var l=i("VU/8")(a,e,!1,function(t){i("jYuM")},"data-v-3c975934",null);s.default=l.exports},jYuM:function(t,s){}});
//# sourceMappingURL=10.a222fa69d7604ef8ce99.js.map